<script setup lang="ts">
import AddNewCategory from "@/views/manage-category/add-category.vue";
import EditNewCategory from "@/views/manage-category/edit-category.vue";
const header = [{
    "title": "T√™n th∆∞ m·ª•c",
    "format": "ƒêinh d·∫°ng",
    "action": "Thao t√°c",
}];
const items: any[] = [
    {
        "id": 1,
        "title": "VƒÉn b·∫£n t√†i li·ªáu",
        "format": "Th∆∞ m·ª•c",
        "children": [
            {
                "id": 2,
                "title": "C√¥ng vƒÉn cung c·∫•p m·∫´u h√¨nh d·∫•u,ch·ªØ k√Ω",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 3,
                "title": "Th√¥ng b√°o m·∫´u d·∫•u,ch·ªØ k√Ω",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 4,
                "title": "Th√¥ng b√°o thay ƒë·ªïi m·∫´u d·∫•u,ch·ªØ k√Ω",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 5,
                "title": "Bi√™n b·∫£n thu m·∫´u h√¨nh d·∫•u,ch·ªØ k√Ω",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 4,
                "title": "T√†i li·ªáu ch·ª© h√¨nh d·∫•u,ch·ªØ k√Ω",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 4,
                "title": "B·∫£n cung c·∫•p m·∫´u h√¨nh d·∫•u,ch·ªØ k√Ω",
                "format": "Th∆∞ m·ª•c",
            }
        ]
    },
    {
        "id": 2,
        "title": "·∫§n ph·∫©m",
        "format": "Th∆∞ m·ª•c",
        "children": [
            {
                "id": 2,
                "title": "√Çn ph·∫©m trong lƒ©nh v·ª±c t√†i ch√≠nh ng√¢n h√†ng",
                "format": "Th∆∞ m·ª•c",
                "children": [
                    {
                        "id": 2,
                        "title": "Ti·ªÅn",
                        "format": "Th∆∞ m·ª•c",
                        "children": [
                            {
                                "id": 2,
                                "title": "Ti·ªÅn h·ªón h·ª£p (Hybrid banknote)",
                                "format": "Th∆∞ m·ª•c",
                            },
                            {
                                "id": 2,
                                "title": "Ti·ªÅn gi·∫•y (Paper banknote)",
                                "format": "Th∆∞ m·ª•c",
                            },
                            {
                                "id": 2,
                                "title": "Ti·ªÅn polyme (Polymer banknote)",
                                "format": "Th∆∞ m·ª•c",
                            },
                        ]
                    },
                ]
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m trong lƒ©nh v·ª±c t∆∞ ph√°p",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m trong lƒ©nh v·ª±c giao th√¥ng v·∫≠n t·∫£i",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m li√™n quan ƒë·∫øn tr·∫≠t t·ª± x√£ h·ªôi",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m trong lƒ©nh v·ª±c gi√°o d·ª•c v√† ƒë√†o t·∫°o",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m trong lƒ©nh v·ª±c √Ω t·∫ø",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m trong lƒ©nh v·ª±c k·∫ø ho·∫°ch v√† ƒë·∫ßu t∆∞",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m trong lƒ©nh v·ª±c t√†i nguy√™n v√† m√¥i tr∆∞·ªùng",
                "format": "Th∆∞ m·ª•c",
            },
            {
                "id": 2,
                "title": "·∫§n ph·∫©m trong lƒ©nh v·ª±c lao ƒë·ªông v√† x√£ h·ªôi",
                "format": "Th∆∞ m·ª•c",
            },
        ]
    },
];
let showFormAdd = ref<boolean>(false);
let showFormEdit = ref<boolean>(false);
let dataEdit = ref();
const computedMoreList = computed(() => {
    return (item: any) => ([
        { title: 'Th√™m m·ªõi', prependIcon: 'tabler-plus', value: "add", onClick: () => { showFormAdd.value = true; } },
        {
            title: 'S·ª≠a',
            prependIcon: 'tabler-pencil',
            value: "edit",
            onClick: () => {
                showFormEdit.value = true;
                dataEdit.value = item;
            }
        },
        {
            title: 'X√≥a', prependIcon: 'tabler-trash', value: "delete", onClick: () => {
                deleteDialog.value = true;
                deleteItem.value = item;
            }
        },
    ]);
});
const deleteItem: any = ref();
const deleteDialog = ref<boolean>(false);
const closeDelete = () => {
    deleteDialog.value = false;
};
const deleteItemConfirm = async (id: any) => {
    closeDelete();
};
</script>

<template>
    <VCard>
        <template v-for="(element, i) in header" :key="i">
            <v-lazy :options="{
                threshold: 0.25,
            }" :min-height="50" transition="scroll-x-reverse-transition">
                <v-treeview :items="[element]">
                    <template #title="{ item }">
                        <v-row align="center">
                            <!-- Title -->
                            <v-col cols="8">
                                {{ item.title }}
                            </v-col>
                            <v-spacer />
                            <!-- Other columns -->
                            <v-col cols="2">
                                {{ item.format }}
                            </v-col>
                            <!-- Actions -->
                            <v-col cols="2">
                                {{ item.action }}
                            </v-col>
                        </v-row>
                    </template>
                </v-treeview>
            </v-lazy>
        </template>
        <template v-for="(element, i) in items">
            <v-lazy :options="{
                threshold: 0.25,
            }" :min-height="50" transition="scroll-x-reverse-transition">
                <v-treeview collapseIcon="tabler-minus" expandIcon="tabler-plus" :items="[element]">
                    <template #title="{ item }">
                        <v-row align="center">
                            <!-- Title -->
                            <v-col cols="8">
                                {{ item.title }}
                            </v-col>
                            <v-spacer />
                            <!-- Other columns -->
                            <v-col cols="2">
                                {{ item.format }}
                            </v-col>
                            <v-col cols="2">
                                <MoreBtn :menu-list="computedMoreList(item)" item-props />
                            </v-col>
                            <!-- Actions -->
                        </v-row>
                    </template>
                    <template #prepend="{ item }">
                        <VIcon size="12" v-if="!item.children" />
                    </template>
                </v-treeview>
            </v-lazy>
        </template>
    </VCard>
    <AddNewCategory v-model:isDrawerOpen="showFormAdd" v-if="showFormAdd" />
    <EditNewCategory v-model:isDrawerOpen="showFormEdit" :data="dataEdit" v-if="showFormEdit" />
    <!-- üëâ Delete Dialog  -->
    <VDialog v-model="deleteDialog" max-width="500px">
        <VCard>
            <VCardTitle class="d-block font-weight-regular text-wrap">
                B·∫£n ghi {{ deleteItem.title }} s·∫Ω ƒë∆∞·ª£c x√≥a ?
            </VCardTitle>

            <VCardActions>
                <VSpacer />

                <VBtn color="error" variant="outlined" @click="closeDelete">
                    H·ªßy
                </VBtn>

                <VBtn color="success" variant="elevated" @click="deleteItemConfirm(deleteItem.id)">
                    X√°c nh·∫≠n
                </VBtn>

                <VSpacer />
            </VCardActions>
        </VCard>
    </VDialog>
</template>
